//Generated by wsdl2apex

public class TibcoPaymentHistory_Service {
    public class getPaymentHistory_xConsumer {
        //public String endpoint_x = 'http://www.postbin.org/wrvryh';
        public String endpoint_x = SystemSettings__c.getInstance().Tibco_Host_URL__c + '/Payment/ServiceAdapter/getPaymentHistory_Consumer';
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCertName_x;
        public String clientCert_x;
        public String clientCertPasswd_x;
        public Integer timeout_x;
        private String[] ns_map_type_info = new String[]{'http://www.sewl.com.au/esb/wsdl/salesforce/paymenthistory/getPaymentHistoryImpl/Payment/ServiceAdapter', 'TibcoPaymentHistory_Service', 'http://www.sewl.com.au/esb/schemas/salesforce/paymenthistory', 'TibcoPaymentHistory_MessageTypes'};
        public TibcoPaymentHistory_MessageTypes.getPaymentHistoryResponse_element getPaymentHistory(String AccountNumber,TibcoPaymentHistory_MessageTypes.Header_element Header) {
            TibcoPaymentHistory_MessageTypes.getPaymentHistoryRequest_element request_x = new TibcoPaymentHistory_MessageTypes.getPaymentHistoryRequest_element();
            TibcoPaymentHistory_MessageTypes.getPaymentHistoryResponse_element response_x;
            request_x.AccountNumber = AccountNumber;
            request_x.Header = Header;
            Map<String, TibcoPaymentHistory_MessageTypes.getPaymentHistoryResponse_element> response_map_x = new Map<String, TibcoPaymentHistory_MessageTypes.getPaymentHistoryResponse_element>();
            response_map_x.put('response_x', response_x);
           	
           	System.debug(endpoint_x);
           	
           	if(!Test.isRunningTest()&&!SystemSettings__c.getInstance().Disable_Web_Services__c){
                WebServiceCallout.invoke(
                  this,
                  request_x,
                  response_map_x,
                  new String[]{endpoint_x,
                  'getPaymentHistory',
                  'http://www.sewl.com.au/esb/schemas/salesforce/paymenthistory',
                  'getPaymentHistoryRequest',
                  'http://www.sewl.com.au/esb/schemas/salesforce/paymenthistory',
                  'getPaymentHistoryResponse',
                  'TibcoPaymentHistory_MessageTypes.getPaymentHistoryResponse_element'}
                );
                response_x = response_map_x.get('response_x');
            } else {
                response_x = new TibcoPaymentHistory_MessageTypes.getPaymentHistoryResponse_element();
                
                if (!SystemSettings__c.getInstance().Disable_Web_Services__c) {
                    response_x.Header = new TibcoPaymentHistory_MessageTypes.Header_element();
                    response_x.Header.MessageResponseStatus = new TibcoPaymentHistory_MessageTypes.MessageResponseStatus_element();
                    response_x.Header.MessageResponseStatus.MessageSuccessInd = 'true';
                    response_x.ProcessOutputData = new TibcoPaymentHistory_MessageTypes.ProcessOutputData_element();
                    response_x.ProcessOutputData.Payments = new TibcoPaymentHistory_MessageTypes.Payments_element();
                    response_x.ProcessOutputData.Payments.Payment = new List<TibcoPaymentHistory_MessageTypes.Payment_element>();
                    TibcoPaymentHistory_MessageTypes.Payment_element payLine = new TibcoPaymentHistory_MessageTypes.Payment_element();
                    payLine.DatePosted = Date.today();
                    payLine.Amount = '100';
                    payLine.Method = 'Test Method';
                    response_x.ProcessOutputData.Payments.Payment.add(payLine);
                } else { // return failure
                    response_x.Header = new TibcoPaymentHistory_MessageTypes.Header_element();
                    response_x.Header.MessageResponseStatus = new TibcoPaymentHistory_MessageTypes.MessageResponseStatus_element();
                    response_x.Header.MessageResponseStatus.MessageSuccessInd = 'false';                    
                    response_x.Header.MessageResponseStatus.ErrorStatus = new List<TibcoPaymentHistory_MessageTypes.ErrorStatus_element>();                 
                    TibcoPaymentHistory_MessageTypes.ErrorStatus_element err = new TibcoPaymentHistory_MessageTypes.ErrorStatus_element();
                    err.ErrorCode='123';
                    err.ErrorSeverity='High';
                    err.ErrorDescription='Test Error';
                    response_x.Header.MessageResponseStatus.ErrorStatus.add(err);
                    
                }                           
            }
            
            return response_x;
        }
    }
}